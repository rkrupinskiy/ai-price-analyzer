<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Price Analyzer - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –°–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="style.css">
</head>
<body data-color-scheme="light">
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="header">
            <div class="header__main">
                <h1 class="header__title">üîç AI Price Analyzer - –ü–†–û–ó–†–ê–ß–ù–ê–Ø –°–ò–°–¢–ï–ú–ê</h1>
                <p class="header__subtitle">–í–∏–¥–∏—Ç–µ –í–°–Å: –ø—Ä–æ–º–ø—Ç—ã, –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã, –æ–±—Ä–∞–±–æ—Ç–∫—É</p>
            </div>
            <div class="header__status">
                <span class="status status--warning" id="systemStatus">–°–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞</span>
                <button class="btn btn--sm btn--outline" id="themeToggle">üåì</button>
            </div>
        </header>

        <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ API -->
        <div class="settings-panel">
            <div class="settings-header">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ OpenAI API</h3>
                <div class="settings-status">
                    <span id="apiStatus" class="api-status">API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</span>
                </div>
            </div>
            
            <div class="settings-grid">
                <div class="settings-group">
                    <label class="form-label" for="openaiApiKey">OpenAI API –∫–ª—é—á *</label>
                    <input type="password" class="form-control" id="openaiApiKey" 
                           placeholder="sk-proj-..." required>
                    <small class="form-help">–ë–µ–∑ API –∫–ª—é—á–∞ —Å–∏—Å—Ç–µ–º–∞ –ù–ï –†–ê–ë–û–¢–ê–ï–¢</small>
                </div>
                
                <div class="settings-group">
                    <label class="form-label" for="openaiModel">–ú–æ–¥–µ–ª—å GPT</label>
                    <select class="form-control" id="openaiModel">
                        <option value="gpt-4o">GPT-4o (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</option>
                        <option value="gpt-4o-mini">GPT-4o Mini (–±—ã—Å—Ç—Ä–µ–µ)</option>
                        <option value="gpt-4-turbo">GPT-4 Turbo</option>
                    </select>
                </div>
                
                <div class="settings-actions">
                    <button class="btn btn--primary" id="saveSettings">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="btn btn--outline" id="testConnection">üß™ –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</button>
                </div>
            </div>
        </div>

        <!-- –ü–ê–ù–ï–õ–¨ –ü–†–û–ó–†–ê–ß–ù–û–°–¢–ò AI -->
        <div class="transparency-panel">
            <div class="transparency-header">
                <h3>üîç –ü–û–õ–ù–ê–Ø –ü–†–û–ó–†–ê–ß–ù–û–°–¢–¨ AI –û–ü–ï–†–ê–¶–ò–ô</h3>
                <div class="transparency-status">
                    <span id="transparencyStatus" class="status status--info">–ì–æ—Ç–æ–≤–æ –∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—é</span>
                </div>
            </div>
            
            <div class="transparency-content">
                <!-- –¢–µ–∫—É—â–∏–π –ø—Ä–æ–º–ø—Ç -->
                <div class="transparency-section">
                    <div class="section-header">
                        <h4>üìã 1. –ü–†–û–ú–ü–¢ –î–õ–Ø OpenAI (—á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è)</h4>
                        <div class="section-actions">
                            <button class="btn btn--sm btn--outline" id="editPromptBtn" disabled>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                            <button class="btn btn--sm btn--outline" id="resetPromptBtn" disabled>üîÑ –°–±—Ä–æ—Å</button>
                        </div>
                    </div>
                    <div class="prompt-display">
                        <textarea id="currentPromptDisplay" class="prompt-viewer" readonly 
                                  placeholder="–ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –¢–û–ß–ù–´–ô –ø—Ä–æ–º–ø—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ OpenAI API">–ü—Ä–æ–º–ø—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å –∫–æ–≥–¥–∞ –Ω–∞—á–Ω–µ—Ç—Å—è AI –æ–ø–µ—Ä–∞—Ü–∏—è</textarea>
                    </div>
                </div>

                <!-- API –∑–∞–ø—Ä–æ—Å -->
                <div class="transparency-section">
                    <div class="section-header">
                        <h4>üì§ 2. JSON –ó–ê–ü–†–û–° –ö OpenAI API</h4>
                        <button class="btn btn--sm btn--outline" id="copyRequestBtn" disabled>üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <div class="api-request-display">
                        <pre id="apiRequestDisplay">{
  "model": "–æ–∂–∏–¥–∞–Ω–∏–µ...",
  "messages": "–æ–∂–∏–¥–∞–Ω–∏–µ...",
  "temperature": "–æ–∂–∏–¥–∞–Ω–∏–µ...",
  "max_tokens": "–æ–∂–∏–¥–∞–Ω–∏–µ..."
}</pre>
                    </div>
                </div>

                <!-- –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç OpenAI -->
                <div class="transparency-section">
                    <div class="section-header">
                        <h4>üì• 3. –ü–û–õ–ù–´–ô –û–¢–í–ï–¢ –û–¢ OpenAI (–±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏)</h4>
                        <div class="section-actions">
                            <button class="btn btn--sm btn--outline" id="copyResponseBtn" disabled>üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                            <span id="responseStats" class="response-stats">–¢–æ–∫–µ–Ω—ã: –æ–∂–∏–¥–∞–Ω–∏–µ</span>
                        </div>
                    </div>
                    <div class="api-response-display">
                        <pre id="apiResponseDisplay">–ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –ü–û–õ–ù–´–ô –æ—Ç–≤–µ—Ç –æ—Ç OpenAI API –±–µ–∑ –∫–∞–∫–æ–π-–ª–∏–±–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏</pre>
                    </div>
                </div>

                <!-- –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
                <div class="transparency-section">
                    <div class="section-header">
                        <h4>‚öôÔ∏è 4. –û–ë–†–ê–ë–û–¢–ê–ù–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢ (–∫–∞–∫ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è)</h4>
                        <button class="btn btn--sm btn--outline" id="copyResultBtn" disabled>üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <div class="processed-result-display">
                        <pre id="processedResultDisplay">–ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç OpenAI</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ -->
        <div class="products-panel">
            <div class="products-header">
                <h3>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h3>
                <div class="products-stats">
                    <span>–¢–æ–≤–∞—Ä–æ–≤: <strong id="totalProducts">0</strong></span>
                    <span>–í—ã–±—Ä–∞–Ω–æ: <strong id="selectedCount">0</strong></span>
                </div>
            </div>
            
            <div class="products-controls">
                <div class="products-actions">
                    <button class="btn btn--primary" id="addProductBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                    <button class="btn btn--secondary" id="addTestData">üß™ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="form-control" id="productSearch" 
                           placeholder="üîç –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
                </div>
            </div>
        </div>

        <!-- AI –ö–æ–º–∞–Ω–¥—ã —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é -->
        <div class="ai-panel">
            <div class="ai-header">
                <h3>ü§ñ AI –ö–æ–º–∞–Ω–¥—ã (—Å –ø–æ–ª–Ω–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é)</h3>
                <div class="ai-status">
                    <span id="aiAgentStatus" class="status status--warning">–ê–≥–µ–Ω—Ç—ã –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã</span>
                </div>
            </div>
            
            <div class="ai-controls">
                <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã -->
                <div class="text-commands">
                    <div class="command-input-group">
                        <input type="text" class="form-control" id="commandInput" 
                               placeholder="–ö–æ–º–∞–Ω–¥–∞: '–Ω–∞–π–¥–∏ —Ü–µ–Ω—É iPhone 15' –∏–ª–∏ '–∏–∑–º–µ–Ω–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ iPhone –Ω–∞ 10'">
                        <button class="btn btn--primary" id="executeCommand" disabled>‚ñ∂Ô∏è –í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
                    </div>
                </div>
                
                <!-- –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã -->
                <div class="quick-commands">
                    <button class="command-btn" data-command="–ø–æ–∏—Å–∫ —Ü–µ–Ω —É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤" disabled>
                        üîç –ù–∞–π—Ç–∏ —Ü–µ–Ω—ã —É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
                    </button>
                    <button class="command-btn" data-command="–ø–æ–∏—Å–∫ –±/—É —Ü–µ–Ω –Ω–∞ –∞–≤–∏—Ç–æ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤" disabled>
                        üõí –ù–∞–π—Ç–∏ –±/—É —Ü–µ–Ω—ã –Ω–∞ Avito
                    </button>
                    <button class="command-btn" data-command="–æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤" disabled>
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ü–µ–Ω—ã
                    </button>
                </div>

                <!-- –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
                <div class="execution-status" id="executionStatus" style="display: none;">
                    <div class="status-content">
                        <div class="loading-spinner"></div>
                        <span id="executionStatusText">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
        <div class="table-container">
            <div class="table-header">
                <h3>üìä –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤</h3>
                <div class="table-actions">
                    <button class="btn btn--outline btn--sm" id="selectAllBtn">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
                    <button class="btn btn--outline btn--sm" id="clearSelection">–°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</button>
                    <button class="btn btn--outline btn--sm" id="deleteSelected" disabled>üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</button>
                </div>
            </div>
            
            <div class="table-wrapper">
                <table class="products-table" id="productsTable">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectAll"></th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</th>
                            <th>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</th>
                            <th>–ö–æ–ª-–≤–æ</th>
                            <th>–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∞</th>
                            <th>–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏</th>
                            <th>–¶–µ–Ω–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ NEW</th>
                            <th>–¶–µ–Ω–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –±/—É</th>
                            <th>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="productsTableBody">
                        <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                    </tbody>
                </table>
                
                <div class="empty-state" id="emptyState">
                    <div class="empty-state__content">
                        <h4>üì¶ –ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ</h4>
                        <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</p>
                        <button class="btn btn--primary" onclick="document.getElementById('addTestData').click()">
                            üß™ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π -->
        <div class="log-panel">
            <div class="log-header">
                <h3>üìù –î–ï–¢–ê–õ–¨–ù–´–ô –ñ–£–†–ù–ê–õ –û–ü–ï–†–ê–¶–ò–ô</h3>
                <div class="log-actions">
                    <button class="btn btn--outline btn--sm" id="clearLog">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button class="btn btn--outline btn--sm" id="exportLog">üì• –≠–∫—Å–ø–æ—Ä—Ç</button>
                    <label class="log-filter">
                        <select id="logFilter" class="form-control">
                            <option value="all">–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</option>
                            <option value="ai">–¢–æ–ª—å–∫–æ AI</option>
                            <option value="api">–¢–æ–ª—å–∫–æ API</option>
                            <option value="error">–¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏</option>
                        </select>
                    </label>
                </div>
            </div>
            
            <div class="log-content" id="logContent">
                <div class="log-entry log-entry--info">
                    <span class="log-time">${new Date().toLocaleString('ru-RU')}</span>
                    <span class="log-type">–°–ò–°–¢–ï–ú–ê</span>
                    <span class="log-message">AI Price Analyzer –∑–∞–ø—É—â–µ–Ω. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ OpenAI API –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã.</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
    <div class="modal hidden" id="addProductModal">
        <div class="modal__backdrop"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h3>
                <button class="btn btn--sm btn--outline modal-close">√ó</button>
            </div>
            <div class="modal__body">
                <form id="addProductForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label" for="newProductName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
                            <input type="text" class="form-control" id="newProductName" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newProductDescription">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                            <input type="text" class="form-control" id="newProductDescription">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newProductQuantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                            <input type="number" class="form-control" id="newProductQuantity" min="0" value="1">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newProductPurchasePrice">–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∞ (‚ÇΩ)</label>
                            <input type="number" class="form-control" id="newProductPurchasePrice" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newProductSalePrice">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (‚ÇΩ)</label>
                            <input type="number" class="form-control" id="newProductSalePrice" min="0" step="0.01">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal__footer">
                <button class="btn btn--outline modal-close">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn--primary" id="saveNewProduct">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞ -->
    <div class="modal hidden" id="editPromptModal">
        <div class="modal__backdrop"></div>
        <div class="modal__content modal__content--large">
            <div class="modal__header">
                <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞</h3>
                <button class="btn btn--sm btn--outline modal-close">√ó</button>
            </div>
            <div class="modal__body">
                <div class="form-group">
                    <label class="form-label" for="editablePrompt">–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è OpenAI:</label>
                    <textarea class="form-control" id="editablePrompt" rows="15" 
                              placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç..."></textarea>
                    <small class="form-help">–≠—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ OpenAI –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ</small>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--outline modal-close">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn--secondary" id="resetCustomPrompt">–°–±—Ä–æ—Å –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É</button>
                <button class="btn btn--primary" id="saveCustomPrompt">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–º–ø—Ç</button>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notification-container" id="notificationContainer">
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
    </div>

    <script src="app.js"></script>
</body>
</html>
