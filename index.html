<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Price Analyzer - –†–µ–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ü–µ–Ω</title>
    <link rel="stylesheet" href="style.css">
</head>
<body data-color-scheme="light">
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="header">
            <div class="header__main">
                <h1 class="header__title">ü§ñ AI Price Analyzer</h1>
                <p class="header__subtitle">–†–µ–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ü–µ–Ω —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ GPT API</p>
            </div>
            <div class="header__status">
                <span class="status status--warning" id="systemStatus">–°–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞</span>
                <button class="btn btn--sm btn--outline" id="themeToggle">üåì</button>
            </div>
        </header>

        <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ API -->
        <div class="settings-panel">
            <div class="settings-header">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h3>
                <div class="settings-status">
                    <span id="apiStatus" class="api-status">API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</span>
                </div>
            </div>
            
            <div class="settings-grid">
                <div class="settings-group">
                    <label class="form-label" for="openaiApiKey">OpenAI API –∫–ª—é—á *</label>
                    <input type="password" class="form-control" id="openaiApiKey" 
                           placeholder="sk-proj-..." required>
                    <small class="form-help">–ë–µ–∑ API –∫–ª—é—á–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</small>
                </div>
                
                <div class="settings-group">
                    <label class="form-label" for="openaiModel">–ú–æ–¥–µ–ª—å GPT</label>
                    <select class="form-control" id="openaiModel">
                        <option value="gpt-4o">GPT-4o (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</option>
                        <option value="gpt-4o-mini">GPT-4o Mini (–±—ã—Å—Ç—Ä–µ–µ)</option>
                        <option value="gpt-4-turbo">GPT-4 Turbo</option>
                    </select>
                </div>
                
                <div class="settings-group">
                    <label class="form-label" for="serverlessEndpoint">Serverless —Ñ—É–Ω–∫—Ü–∏—è URL</label>
                    <input type="url" class="form-control" id="serverlessEndpoint" 
                           placeholder="https://your-app.vercel.app/api/openai">
                    <small class="form-help">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –ø—Ä—è–º–æ–≥–æ API (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ CORS)</small>
                </div>
                
                <div class="settings-actions">
                    <button class="btn btn--primary" id="saveSettings">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="btn btn--outline" id="testConnection">üß™ –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</button>
                </div>
            </div>
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü–µ–π —Ç–æ–≤–∞—Ä–æ–≤ -->
        <div class="products-panel">
            <div class="products-header">
                <h3>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h3>
                <div class="products-stats">
                    <span>–¢–æ–≤–∞—Ä–æ–≤: <strong id="totalProducts">0</strong></span>
                    <span>–í—ã–±—Ä–∞–Ω–æ: <strong id="selectedCount">0</strong></span>
                </div>
            </div>
            
            <div class="products-controls">
                <div class="products-actions">
                    <button class="btn btn--primary" id="addProductBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                    <label class="btn btn--outline" for="importFile">
                        üì§ –ò–º–ø–æ—Ä—Ç Excel/CSV
                        <input type="file" id="importFile" accept=".xlsx,.xls,.csv" style="display: none;">
                    </label>
                    <button class="btn btn--secondary" id="exportBtn">üì• –≠–∫—Å–ø–æ—Ä—Ç Excel</button>
                </div>
                
                <div class="search-box">
                    <input type="text" class="form-control" id="productSearch" 
                           placeholder="üîç –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
                </div>
            </div>
        </div>

        <!-- AI –ö–æ–º–∞–Ω–¥—ã -->
        <div class="ai-panel">
            <div class="ai-header">
                <h3>ü§ñ AI –ê–≥–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã</h3>
                <div class="ai-status">
                    <span id="aiAgentStatus" class="status status--warning">–ê–≥–µ–Ω—Ç –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω</span>
                </div>
            </div>
            
            <div class="ai-controls">
                <!-- –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã -->
                <div class="voice-commands">
                    <button class="btn btn--primary" id="voiceBtn" disabled>
                        üé§ –ì–æ–ª–æ—Å–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
                    </button>
                    <span id="voiceStatus" class="voice-status">–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</span>
                </div>
                
                <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã -->
                <div class="text-commands">
                    <div class="command-input-group">
                        <input type="text" class="form-control" id="commandInput" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: '–Ω–∞–π–¥–∏ —Ü–µ–Ω—É –Ω–∞ iPhone 15' –∏–ª–∏ '–∏–∑–º–µ–Ω–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ iPhone –Ω–∞ 10'">
                        <button class="btn btn--primary" id="executeCommand" disabled>–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
                    </div>
                </div>
                
                <!-- –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã -->
                <div class="quick-commands">
                    <button class="command-btn" data-command="–ø–æ–∏—Å–∫ —Ü–µ–Ω —É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤" disabled>
                        üîç –ù–∞–π—Ç–∏ —Ü–µ–Ω—ã —É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
                    </button>
                    <button class="command-btn" data-command="–ø–æ–∏—Å–∫ –±/—É —Ü–µ–Ω –Ω–∞ –∞–≤–∏—Ç–æ" disabled>
                        üõí –ù–∞–π—Ç–∏ –±/—É —Ü–µ–Ω—ã –Ω–∞ –ê–≤–∏—Ç–æ
                    </button>
                    <button class="command-btn" data-command="–æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ü–µ–Ω—ã" disabled>
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ü–µ–Ω—ã
                    </button>
                </div>
            </div>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
        <div class="table-container">
            <div class="table-header">
                <h3>üìä –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤</h3>
                <div class="table-actions">
                    <button class="btn btn--outline btn--sm" id="selectAllBtn">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
                    <button class="btn btn--outline btn--sm" id="clearSelection">–°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</button>
                    <button class="btn btn--outline btn--sm" id="deleteSelected" disabled>üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</button>
                </div>
            </div>
            
            <div class="table-wrapper">
                <table class="products-table" id="productsTable">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectAll"></th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</th>
                            <th>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</th>
                            <th>–ö–æ–ª-–≤–æ</th>
                            <th>–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∞</th>
                            <th>–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏</th>
                            <th>–¶–µ–Ω–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ NEW</th>
                            <th>–¶–µ–Ω–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –±/—É</th>
                            <th>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="productsTableBody">
                        <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                    </tbody>
                </table>
                
                <div class="empty-state" id="emptyState">
                    <div class="empty-state__content">
                        <h4>üì¶ –ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ</h4>
                        <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏–∑ Excel/CSV —Ñ–∞–π–ª–∞</p>
                        <button class="btn btn--primary" onclick="document.getElementById('addProductBtn').click()">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –õ–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π -->
        <div class="log-panel">
            <div class="log-header">
                <h3>üìù –ñ—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π AI –∞–≥–µ–Ω—Ç–∞</h3>
                <div class="log-actions">
                    <button class="btn btn--outline btn--sm" id="clearLog">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
                    <button class="btn btn--outline btn--sm" id="exportLog">üì• –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–∞</button>
                </div>
            </div>
            
            <div class="log-content" id="logContent">
                <div class="log-entry log-entry--info">
                    <span class="log-time">${new Date().toLocaleString('ru-RU')}</span>
                    <span class="log-type">–°–ò–°–¢–ï–ú–ê</span>
                    <span class="log-message">AI Price Analyzer –∑–∞–ø—É—â–µ–Ω. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã.</span>
                </div>
            </div>
        </div>

        <!-- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞ -->
        <div class="search-history-panel">
            <div class="search-history-header">
                <h3>üîç –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞ —Ü–µ–Ω</h3>
                <div class="search-history-stats">
                    <span>–£—Å–ø–µ—à–Ω–æ: <strong id="successfulSearches">0</strong></span>
                    <span>–û—à–∏–±–æ–∫: <strong id="failedSearches">0</strong></span>
                </div>
            </div>
            
            <div class="search-history-content" id="searchHistoryContent">
                <div class="search-history-empty">
                    <p>–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞ –ø—É—Å—Ç–∞. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π –ø–æ–∏—Å–∫ —Ü–µ–Ω.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
    <div class="modal hidden" id="addProductModal">
        <div class="modal__backdrop"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h3>
                <button class="btn btn--sm btn--outline modal-close">√ó</button>
            </div>
            <div class="modal__body">
                <form id="addProductForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label" for="newProductName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
                            <input type="text" class="form-control" id="newProductName" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newProductDescription">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                            <input type="text" class="form-control" id="newProductDescription">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newProductQuantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                            <input type="number" class="form-control" id="newProductQuantity" min="0" value="1">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newProductPurchasePrice">–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∞ (‚ÇΩ)</label>
                            <input type="number" class="form-control" id="newProductPurchasePrice" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newProductSalePrice">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (‚ÇΩ)</label>
                            <input type="number" class="form-control" id="newProductSalePrice" min="0" step="0.01">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal__footer">
                <button class="btn btn--outline modal-close">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn--primary" id="saveNewProduct">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ -->
    <div class="modal hidden" id="searchResultModal">
        <div class="modal__backdrop"></div>
        <div class="modal__content modal__content--large">
            <div class="modal__header">
                <h3 id="searchResultTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h3>
                <button class="btn btn--sm btn--outline modal-close">√ó</button>
            </div>
            <div class="modal__body">
                <div id="searchResultContent">
                    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--outline modal-close">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button class="btn btn--primary" id="acceptSearchResult">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notification-container" id="notificationContainer">
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
    </div>

    <script src="app.js"></script>
</body>
</html>
